# Pairing the iOS App with NovaKey-Daemon

Pairing establishes **mutual trust** between your phone and your computer.  
You typically do this once per device (or again if the host/port changes).

## Pairing screens

### Manage listeners
![Edit listeners](../assets/screenshots/novakey-edit-listeners.PNG)

### Pair / Send actions on a listener
![Swipe pair/send listener](../assets/screenshots/novakey-swipe-pair-send-listener.PNG)

### Scan QR code
![Scan QR](../assets/screenshots/novakey-scan-qr.PNG)


## Before you start
- NovaKey-Daemon is installed and running on your computer.
- You know how your phone will reach the computer:
  - **Local only**: daemon binds to `127.0.0.1` (safe default, but your phone can’t reach it).
  - **LAN**: daemon binds to `0.0.0.0:60768` or a specific LAN IP (phone can reach it on Wi-Fi).

If you want phone → computer over Wi-Fi, the daemon must listen on a LAN-reachable address.

---

## Step 1 — Add a Listener (iOS)

1. Open **NovaKey**
2. Tap the **Listeners** icon (antenna)
3. Under **Add Listener** enter:
   - **Name**: e.g. “Linux Desktop”
   - **Host or IP**: your computer’s hostname or LAN IP
   - **Port**: `60768` (default)
   - (Optional) Notes
4. Enable **Make Send Target** if this is your main machine
5. Tap **Add**

> You must have a **Send Target** selected to pair or send.

---

## Step 2 — Pair via QR (recommended)

1. On your computer: start NovaKey-Daemon.
2. If there are **no paired devices yet**, the daemon generates a QR code
   (commonly as `novakey-pair.png`).
   - If a device store already exists, the daemon may not regenerate a pairing QR.
3. In NovaKey (iOS):
   - Open **Listeners**
   - Tap the Listener
   - Choose **Pair**
   - Tap **Scan QR Code**
4. Scan the QR shown on the computer.

During pairing, NovaKey will:
- validate server identity (fingerprint)
- establish keys (post-quantum)
- store pairing keys in the iOS Keychain
- finalize pairing with the daemon

You’ll see **“Paired”** when complete.

---

## Step 3 — Manual pairing (advanced)

If you cannot scan a QR code:

1. On your computer, locate the pairing output (e.g., a pairing blob / `devices.json` contents generated by the daemon).
2. In NovaKey:
   - Listeners → Pair
   - Paste the JSON/blob into the editor
   - Tap **Save**

⚠️ Treat pairing material as **highly sensitive**. Anyone with it may be able to impersonate your device.

---

### Delete a listener
![Swipe delete listener](../assets/screenshots/novakey-swipe-delete-listener.PNG)


## Why host/IP can’t be edited after pairing

Pairing keys are bound to a **specific server address** to prevent silent redirection attacks.

If the server address changes:
- create a **new Listener**
- re-pair

You can still edit:
- display name
- notes

